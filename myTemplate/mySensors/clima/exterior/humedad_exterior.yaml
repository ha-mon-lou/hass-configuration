#
# https://homeassistant-notes.notion.site/Sensores-1819be0e2c1780b28fadcaf9a0e00213
# https://www.pacienciadigital.com/redundancia-sensores-home-assistant/
#
- sensor:
    - name: "Humedad Local"
      unique_id: "humedad_localidad"
      device_class: humidity
      unit_of_measurement: "%"
      state: " {{states('sensor.st_quirze_del_v_vallsuau_barcelona_humidity')}} "
      icon: mdi:water-percent-alert

    - name: "Humedad Local XF"
      unique_id: "humedad_localidad_meteocat"
      device_class: humidity
      unit_of_measurement: "%"
      state: " {{states('sensor.sensor.meteocat_xf_sant_quirze_del_valles_humidity')}} "
      icon: mdi:water-percent-alert

    - name: "H. Exterior"
      unique_id: "humedad_exterior"
      device_class: humidity
      unit_of_measurement: "%"
      state: >
        {% from '1oo2.jinja' import macro_1oo2 %}
        {{ macro_1oo2('sensor.humedad_localidad_meteocat','sensor.humedad_localidad') }}
      icon: mdi:calculator

- sensor:
    - name: "humedad exterior máxima en 24h"
      unique_id: "humedad_exterior_maxima_24h"
      platform: statistics
      entity_id: sensor.humedad_exterior
      state_characteristic: value_max
      max_age:
        hours: 24
      sampling_size: 200

- sensor:
    - name: "humedad exterior mínima en 24h"
      unique_id: "humedad_exterior_minima_24h"
      platform: statistics
      entity_id: sensor.humedad_exterior
      state_characteristic: value_min
      max_age:
        hours: 24
      sampling_size: 200
